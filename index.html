<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Grade & Study Planner</title>

<style>
*{box-sizing:border-box;}
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
}

/* ===== LOGIN ===== */
#loginPage{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#0f172a,#1e293b);
}
.login-box{
    background:#020617;
    padding:40px;
    width:320px;
    border-radius:18px;
    color:white;
    box-shadow:0 25px 50px rgba(0,0,0,.6);
}
.login-box h2{
    text-align:center;
    margin-bottom:25px;
}
.login-box input{
    width:100%;
    padding:12px;
    margin-bottom:15px;
    border-radius:10px;
    border:none;
    font-size:16px;
}
.login-box button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    background:#38bdf8;
    font-weight:bold;
    cursor:pointer;
}
.error{
    color:#f87171;
    text-align:center;
}

/* ===== MAIN ===== */
#mainPage{
    display:none;
    background:#f1f5f9;
    min-height:100vh;
}
.container{
    max-width:1100px;
    margin:40px auto;
    background:#ffffff;
    padding:30px 40px;
    border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.1);
}
h1{
    text-align:center;
    margin-bottom:6px;
}
.subtitle{
    text-align:center;
    color:#64748b;
    margin-bottom:30px;
}
table{
    width:100%;
    border-collapse:separate;
    border-spacing:0 14px;
}
th{
    font-size:14px;
    color:#475569;
}
td{
    background:#f8fafc;
    padding:12px;
    border-radius:12px;
    vertical-align:top;
}
input{
    width:100%;
    padding:8px;
    border-radius:8px;
    border:1px solid #cbd5e1;
    font-size:14px;
}
input:focus{
    outline:none;
    border-color:#38bdf8;
}
.score-box{
    display:grid;
    gap:6px;
}
.score-box label{
    font-size:12px;
    color:#64748b;
}
.actions{
    display:flex;
    justify-content:space-between;
    margin-top:25px;
}
button{
    padding:12px 20px;
    border:none;
    border-radius:10px;
    font-size:15px;
    cursor:pointer;
}
.add{
    background:#e0f2fe;
    color:#0369a1;
}
.calc{
    background:#38bdf8;
    color:white;
}
.result{
    margin-top:30px;
    background:#f1f5f9;
    padding:20px;
    border-radius:12px;
    font-size:16px;
}
hr{
    border:none;
    border-top:1px solid #cbd5e1;
    margin:15px 0;
}
</style>
</head>

<body>

<!-- ===== LOGIN PAGE ===== -->
<div id="loginPage">
    <div class="login-box">
        <h2>เข้าสู่ระบบ</h2>
        <input id="user" placeholder="Username">
        <input id="pass" type="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <div id="loginError" class="error"></div>
    </div>
</div>

<!-- ===== MAIN PAGE ===== -->
<div id="mainPage">
<div class="container">
<h1>ระบบคำนวณเกรดและวางแผนการเรียน</h1>
<div class="subtitle">Grade & Study Planning Web Application</div>

<table id="gradeTable">
<tr>
<th>ชื่อวิชา</th>
<th>หน่วยกิต</th>
<th>คะแนนงาน</th>
<th>คะแนนสอบ</th>
<th>% งาน</th>
<th>% สอบ</th>
</tr>
</table>

<div class="actions">
<button class="add" onclick="addSubject()">➕ เพิ่มรายวิชา</button>
<button class="calc" onclick="calculate()">คำนวณผลการเรียน</button>
</div>

<div class="result" id="result"></div>
</div>
</div>

<script>
/* ===== LOGIN ===== */
function login(){
    const u=document.getElementById("user").value;
    const p=document.getElementById("pass").value;

    if(u==="watthanapong" && p==="1234"){
        document.getElementById("loginPage").style.display="none";
        document.getElementById("mainPage").style.display="block";
    }else{
        document.getElementById("loginError").innerText="ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง";
    }
}

/* ===== GRADE SYSTEM ===== */
let index=0;

function addSubject(){
    index++;
    document.getElementById("gradeTable").innerHTML+=`
    <tr>
        <td><input placeholder="ชื่อวิชา"></td>
        <td><input id="credit${index}" type="number" value="3"></td>

        <td>
            <div class="score-box">
                <label>คะแนนที่ได้</label>
                <input id="work${index}" type="number">
                <label>คะแนนเต็ม</label>
                <input id="workMax${index}" type="number">
            </div>
        </td>

        <td>
            <div class="score-box">
                <label>คะแนนที่ได้</label>
                <input id="exam${index}" type="number">
                <label>คะแนนเต็ม</label>
                <input id="examMax${index}" type="number">
            </div>
        </td>

        <td><input id="wp${index}" type="number" value="40"></td>
        <td><input id="ep${index}" type="number" value="60"></td>
    </tr>`;
}
addSubject();

function gradeNumber(score){
    if(score>=80) return 4;
    if(score>=70) return 3;
    if(score>=60) return 2;
    if(score>=50) return 1;
    return 0;
}

function calculate(){
    let totalCredits=0;
    let totalPoints=0;
    let detail="";

    for(let i=1;i<=index;i++){
        let credit = Number(document.getElementById("credit"+i).value) || 1;

        let w  = Number(document.getElementById("work"+i).value);
        let wM = Number(document.getElementById("workMax"+i).value);
        let e  = Number(document.getElementById("exam"+i).value);
        let eM = Number(document.getElementById("examMax"+i).value);
        let wp = Number(document.getElementById("wp"+i).value)/100;
        let ep = Number(document.getElementById("ep"+i).value)/100;

        if(!wM || !eM) continue;

        let totalScore=(w/wM*100*wp)+(e/eM*100*ep);
        let grade=gradeNumber(totalScore);

        totalCredits+=credit;
        totalPoints+=grade*credit;

        detail+=`วิชาที่ ${i} : คะแนน ${totalScore.toFixed(2)} → เกรด ${grade}<br>`;
    }

    document.getElementById("result").innerHTML=
        detail+`<hr><b>เกรดเฉลี่ยรวม (GPA): ${(totalPoints/totalCredits||0).toFixed(2)}</b>`;
}
</script>

</body>
</html>
